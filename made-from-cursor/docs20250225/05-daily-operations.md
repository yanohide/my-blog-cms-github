# 日常の運用ガイド

セットアップが完了し、記事の書き方も覚えたら、ここからは「運用」フェーズです。サイトを安定して運用するために知っておくべきことをまとめます。

---

## 目次

1. [運用の全体像](#1-運用の全体像)
2. [サイトの確認方法](#2-サイトの確認方法)
3. [記事公開後のチェックリスト](#3-記事公開後のチェックリスト)
4. [Sanity Studio の日常操作](#4-sanity-studio-の日常操作)
5. [アクセス管理](#5-アクセス管理)
6. [運用カレンダー（定期作業）](#6-運用カレンダー定期作業)
7. [AI ツールを活用した運用](#7-ai-ツールを活用した運用)

---

## 1. 運用の全体像

日常的な作業は大きく 4 つに分かれます。

```
┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ ネタ集め・企画  │  │   記事の管理   │  │  サイトの確認  │  │ 定期メンテナンス │
│   (Obsidian)  │  │ (Cursor+Sanity)│  │              │  │              │
│ ・情報収集    │  │ ・記事の投稿   │  │ ・表示の確認   │  │ ・月次チェック  │
│ ・調査メモ    │  │ ・記事の編集   │  │ ・エラーの確認  │  │ ・パッケージ更新 │
│ ・アウトライン │  │ ・下書き管理   │  │ ・速度の確認   │  │ ・バックアップ  │
└──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘
      毎日             週数回           週1回程度          月1回程度
```

> **ポイント**: Obsidian でネタを貯めて、Cursor で書いて、Sanity で公開する——この流れが日常のサイクルです。詳しくは [04-daily-workflow.md](./04-daily-workflow.md) を参照してください。

---

## 2. サイトの確認方法

### 公開サイトを確認する

1. ブラウザで公開サイトの URL（`https://あなたのサイト.vercel.app`）を開きます
2. 以下をチェックします：

| 確認項目 | 確認方法 |
|---------|---------|
| トップページが表示されるか | URL にアクセスして確認 |
| 最新の記事が表示されているか | 記事一覧に新しい記事があるか確認 |
| 記事の詳細ページが開けるか | 記事タイトルをクリックして確認 |
| Sanity Studio にアクセスできるか | `/studio` にアクセスして確認 |

### Vercel のダッシュボードで確認する

1. [https://vercel.com/dashboard](https://vercel.com/dashboard) にログインします
2. プロジェクトを選択します
3. 以下を確認します：
   - **Status**: 最新のデプロイが **「Ready」** になっているか
   - **Domains**: サイトの URL が正しいか
   - **Deployments**: 最近のデプロイでエラーが出ていないか

> **「Ready」とは？**
> サイトが正常に動作している状態です。「Error」と表示されている場合は、デプロイに問題があります。[06-troubleshooting.md](./06-troubleshooting.md) を参照してください。

---

## 3. 記事公開後のチェックリスト

記事を公開したら、以下を確認しましょう。

### 公開直後（5 分以内）

- [ ] サイトに記事が表示されているか（最大 60 秒で反映）
- [ ] タイトルが正しいか
- [ ] 記事の URL（スラッグ）が想定通りか
- [ ] 本文が正しく表示されているか（改行や書式のくずれがないか）

### 公開後（時間のあるとき）

- [ ] GitHub にマークダウンファイルをプッシュしたか（バックアップ）
- [ ] スマートフォンでも表示を確認したか

> **スマホでの確認方法**: パソコンのブラウザで `F12`（または `Cmd+Option+I`）を押すと開発者ツールが開きます。左上のスマホアイコンをクリックすると、スマホ画面のシミュレーションができます。もちろん、実際のスマホでURLを開いて確認してもOKです。

---

## 4. Sanity Studio の日常操作

### 記事の一覧を確認する

1. `/studio` にアクセスします
2. 左メニューの **「Post」** をクリックします
3. 記事の一覧が表示されます

### 記事のステータスを確認する

Sanity Studio では、記事に 2 つの状態があります。

| ステータス | 意味 | サイトでの表示 |
|-----------|------|-------------|
| **Published**（公開済み） | 公開ボタンを押した記事 | 表示される |
| **Draft**（下書き） | まだ公開していない、または編集中の記事 | 表示されない |

> **編集中の注意**: 公開済みの記事を編集すると、一時的に「Draft」状態になります。編集が終わったら必ず **「Publish」** ボタンを押して公開状態に戻してください。

### 記事の並び順

記事は **Published At**（公開日）の新しい順に表示されます。記事の順番を変えたい場合は、公開日を変更します。

---

## 5. アクセス管理

### 各サービスのアカウント情報を管理する

このプロジェクトでは 3 つのサービスを使っています。それぞれのログイン情報を把握しておきましょう。

| サービス | ログイン方法 | 管理画面の URL |
|---------|------------|--------------|
| Sanity | Google アカウント | [https://www.sanity.io/manage](https://www.sanity.io/manage) |
| GitHub | メール＋パスワード | [https://github.com](https://github.com) |
| Vercel | GitHub アカウント連携 | [https://vercel.com/dashboard](https://vercel.com/dashboard) |

### チーム運用する場合

複数人でブログを運営する場合は、以下の設定が必要です。

**Sanity（記事の管理）**
1. [https://www.sanity.io/manage](https://www.sanity.io/manage) でプロジェクトを開きます
2. **「Members」** でメンバーを招待します
3. 役割（Role）を設定します：
   - **Editor**: 記事の投稿・編集ができる
   - **Viewer**: 記事の閲覧のみ

**GitHub（コードの管理）**
1. リポジトリの **「Settings」** → **「Collaborators」** でメンバーを招待します

**Vercel（サイトの公開）**
1. チームプラン（有料）が必要です。個人運営であれば設定不要です。

---

## 6. 運用カレンダー（定期作業）

### 毎日〜週に数回

| 作業 | 内容 | 所要時間 |
|------|------|---------|
| 記事の投稿 | Cursor で執筆 → GitHub にプッシュ → Sanity Studio で公開 | 記事による |
| 表示確認 | 公開後にサイトを開いて記事が表示されているか確認 | 1 分 |

### 週に 1 回

| 作業 | 内容 | 所要時間 |
|------|------|---------|
| サイト全体の確認 | トップページ、記事ページ、Studio が正常に動作するか確認 | 5 分 |
| 下書き記事の整理 | Sanity Studio で不要な下書きを削除 | 5 分 |

### 月に 1 回

| 作業 | 内容 | 所要時間 |
|------|------|---------|
| Vercel のデプロイ状況確認 | エラーが出ていないかダッシュボードで確認 | 5 分 |
| パッケージの更新確認 | [07-site-maintenance.md](./07-site-maintenance.md) を参照 | 15〜30 分 |
| バックアップ確認 | GitHub に最新のコードがプッシュされているか確認 | 5 分 |

---

## 7. AI ツールを活用した運用

Cursor や Claude Code を使うと、日常の運用作業を効率化できます。

### AI にできること

| やりたいこと | AI への指示例 |
|------------|-------------|
| 記事を書く | 「〇〇についてのブログ記事を書いて」 |
| 記事を GitHub にプッシュ | 「blog/ の新しい記事を GitHub にプッシュして」 |
| サイトの確認 | 「サイトが正常に動いているか確認して」 |
| エラーの調査 | 「Vercel のビルドエラーを調べて」 |
| パッケージの更新 | 「npm パッケージを最新に更新して」 |

### Cursor での操作

Cursor のチャット機能（`Cmd+L` または `Ctrl+L`）で AI に指示を出せます。

```
例: 「blog/ フォルダに new-article.md というファイルを作って、
     Next.js の入門記事を書いてください」
```

### Claude Code での操作

ターミナルで `claude` コマンドを実行すると、Claude Code が起動します。コードの変更やコマンド実行を AI に任せられます。

```
例: 「サイトをビルドしてエラーがないか確認して」
     「blog/ の記事を Sanity にアップロードして」
```

> **ポイント**: AI ツールは CLI（ターミナルのコマンド）を実行できます。Sanity CLI（`npm install -g sanity@latest`）や Vercel CLI（`npm install -g vercel`）をインストールしておくと、AI に任せられる作業の幅が広がります。

---

前のステップ ← [04-daily-workflow.md](./04-daily-workflow.md)
次のステップ → [06-troubleshooting.md](./06-troubleshooting.md) に進みましょう
